<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <link rel="stylesheet" href="../styles/reset.css">
  <link rel="stylesheet" href="../styles/daiyue_enter.css">
  <script type="text/javascript" src="../js/lib/vue.min.js"></script>
</head>
<body>
<div id="app">
  <!--<div class="title">
    <p>欢迎进入岱岳区公共信用信息平台</p>
    <p>————村居信用子系统————</p>
  </div>
  <div class="left-part">
    <div class="inner">
      <img class="cloud" src="../images/daiyue/yun.png" alt="">
      <img src="../images/daiyue/tuopan.png" alt="">
      <img class="shield" src="../images/daiyue/dunpai.png" alt="">
      <svg class="line1" viewBox="0 0 400 400">
        <path d="M0 0 L400 220 L0 400" stroke="#4198e2" fill="transparent" stroke-width="4px" />
      </svg>
    </div>
  </div>
  <div class="bottom-part">
    <div class="inner">
      <img class="cloud" src="../images/daiyue/yun.png" alt="">
      <img class="up-arrow" src="../images/daiyue/arrow.png" alt="">
      <img src="../images/daiyue/tuopan.png" alt="">
      <img class="foundation1" src="../images/daiyue/tuopan.png" alt="">
      <img class="foundation1 float1" src="../images/daiyue/sousuo.png" alt="">

      <img class="foundation2" src="../images/daiyue/tuopan.png" alt="">
      <img class="foundation2 float2" src="../images/daiyue/quxian.png" alt="">

      <img class="foundation3" src="../images/daiyue/tuopan.png" alt="">
      <img class="foundation3 float3" src="../images/daiyue/zhu.png" alt="">

      <img class="board" src="../images/daiyue/people.png" alt="">
      &lt;!&ndash;<img class="arrow" src="../images/daiyue/jiantou.png" alt="">&ndash;&gt;
      <img class="data" src="../images/daiyue/data.png" alt="">
      <svg class="line2">
        <path d="M0 400 L500 170 L1000 400 L1600 10 L2000 200" stroke="#4198e2" fill="transparent" stroke-width="4px" />
      </svg>
    </div>
  </div>-->
  <div class="bg" ref="mainBg"></div>
  <div class="main-inner"></div>
</div>
<script src="https://cdn.bootcdn.net/ajax/libs/three.js/r122/three.min.js"></script>
<script type="text/javascript">
  new Vue({
    el: '#app',
    data(){
    	return {
		    camera: null,
		    scene: null,
		    renderer: null,
		    uniforms: {
			    resolution: {
				    value: new THREE.Vector2(window.innerWidth, window.innerHeight)
			    },
			    iTime: {
				    type: 'f',
				    value: 1.0
			    },
			    iResolution: {
				    type: 'v2',
				    value: new THREE.Vector2()
			    },
			    iMouse: {
				    type: 'v2',
				    value: new THREE.Vector2()
			    }
		    }
      }
    },
    mounted() {
	    this.initBg()
	    this.animate()
      // 过度请求跳转
      setTimeout(()=> location.href = "http://www.baidu.com", 2000 )
    },
    beforeDestroy() {
		  cancelAnimationFrame(this.animation)
		  this.animation = null
		  Object.assign(this.$data, this.$options.data())
	  },
    methods: {
	    initBg() {
		    var container = this.$refs.mainBg
		    var self = this
		    init()
		    function init() {
			    self.camera = new THREE.Camera()
			    self.camera.position.z = 1
			    self.scene = new THREE.Scene()
			    var geometry = new THREE.PlaneBufferGeometry(4, 4)
			    var material = new THREE.ShaderMaterial({
				    uniforms: self.uniforms,
				    vertexShader: 'void main() { gl_Position = vec4( position, 1.0 ); }',
				    fragmentShader: `
uniform vec2 iResolution;
uniform float iTime;
void main()
{
vec2 uv = -1.0 + 2.0*gl_FragCoord.xy / iResolution.xy;
uv.x *=  iResolution.x / iResolution.y;
    // background
vec3 color = vec3(0.9 + 0.2*uv.y);
    // bubbles
for( int i=0; i<10; i++ )
{
        // bubble seeds
float pha =      sin(float(i)*546.13+1.0)*0.5 + 0.5;
float siz = pow( sin(float(i)*651.74+5.0)*0.5 + 0.5, 4.0 );
float pox =      sin(float(i)*321.55+4.1) * iResolution.x / iResolution.y;
        // buble size, position and color
float rad = 0.1 + 0.2*siz;
vec2  pos = vec2( pox, -1.0-rad + (2.0+2.0*rad)*mod(pha+0.4*iTime*(0.2+0.8*siz),1.0));
float dis = length( uv - pos );
vec3  col = mix( vec3(0.04,0.3,0.5), vec3(0.1,0.4,0.8), 0.5+0.5*sin(float(i)*1.2+1.9));
//    col+= 8.0*smoothstep( rad*0.95, rad, dis );
        // render
float f = length(uv-pos)/rad;
f = sqrt(clamp(1.0-f*f,0.0,1.0));
color -= col.zyx *(1.0-smoothstep( rad*0.95, rad, dis )) * f;
}
    // vigneting
color *= sqrt(1.5-0.1*length(uv));
gl_FragColor = vec4(color,0.2);
}
`
			    })
			    material.transparent = true
			    var mesh = new THREE.Mesh(geometry, material)
			    self.scene.add(mesh)
			    self.renderer = new THREE.WebGLRenderer({alpha:true})
			    self.renderer.setPixelRatio(window.devicePixelRatio)
			    container.appendChild(self.renderer.domElement)
			    onWindowResize()
			    window.addEventListener('resize', onWindowResize, false)
		    }

		    function onWindowResize(event) {
			    self.renderer.setSize(window.innerWidth, window.innerHeight)
			    self.uniforms.iResolution.value.x = self.renderer.domElement.width
			    self.uniforms.iResolution.value.y = self.renderer.domElement.height
		    }
	    },

	    animate() {
		    requestAnimationFrame(this.animate)
		    this.render()
	    },

	    render() {
		    this.uniforms.iTime.value += 0.05
		    this.renderer.render(this.scene, this.camera)
	    }
    }
  })
</script>
</body>
</html>
